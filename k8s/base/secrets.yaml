# =============================================================================
# Kubernetes Secrets - TEMPLATE
# =============================================================================
# WARNING: This is a template file. Do NOT commit actual secrets to version control.
# Use a secrets management solution like:
# - Kubernetes External Secrets Operator
# - HashiCorp Vault
# - SOPS (Secrets OPerationS)
# - Sealed Secrets
# =============================================================================

---
apiVersion: v1
kind: Secret
metadata:
  name: database-credentials
  namespace: investment-system
type: Opaque
stringData:
  DATABASE_URL: "postgresql://user:password@host:5432/investment_system"
  REDIS_URL: "redis://:password@host:6379"

---
apiVersion: v1
kind: Secret
metadata:
  name: jwt-secret
  namespace: investment-system
type: Opaque
stringData:
  JWT_SECRET: "your-super-secret-jwt-key-change-this-in-production"

---
apiVersion: v1
kind: Secret
metadata:
  name: api-keys
  namespace: investment-system
type: Opaque
stringData:
  # LLM Providers
  OPENAI_API_KEY: "sk-..."
  ANTHROPIC_API_KEY: "sk-ant-..."
  GEMINI_API_KEY: "..."
  
  # Financial Data APIs
  POLYGON_API_KEY: "..."
  FMP_API_KEY: "..."
  FRED_API_KEY: "..."
  
  # Vector Database
  PINECONE_API_KEY: "..."
  PINECONE_ENVIRONMENT: "..."
  
  # Object Storage (DigitalOcean Spaces)
  SPACES_ACCESS_KEY: "..."
  SPACES_SECRET_KEY: "..."
  SPACES_BUCKET: "investment-agent-storage"
  SPACES_REGION: "nyc3"

---
# =============================================================================
# Service Account for Pods
# =============================================================================
apiVersion: v1
kind: ServiceAccount
metadata:
  name: investment-service-account
  namespace: investment-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: investment-pod-role
  namespace: investment-system
rules:
- apiGroups: [""]
  resources: ["configmaps", "secrets"]
  verbs: ["get", "list", "watch"]
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: investment-pod-role-binding
  namespace: investment-system
subjects:
- kind: ServiceAccount
  name: investment-service-account
  namespace: investment-system
roleRef:
  kind: Role
  name: investment-pod-role
  apiGroup: rbac.authorization.k8s.io
